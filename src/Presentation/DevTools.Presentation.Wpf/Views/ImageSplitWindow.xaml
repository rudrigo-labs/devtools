<Window x:Class="DevTools.Presentation.Wpf.Views.ImageSplitWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Divisor de Imagens" Height="450" Width="600"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        ShowInTaskbar="True"
        Topmost="True">

    <Window.Resources>
        <!-- Styles removed to use global theme -->
    </Window.Resources>

    <Border Background="{StaticResource WindowBackgroundBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="5">
        <Grid Margin="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/> <!-- Header -->
                <RowDefinition Height="*"/>    <!-- Content -->
                <RowDefinition Height="Auto"/> <!-- Actions -->
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" MouseLeftButtonDown="Header_MouseLeftButtonDown" Background="Transparent">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="✂" FontSize="16" Foreground="{StaticResource AccentBrush}" Margin="0,0,10,0"/>
                    <TextBlock Text="Divisor de Imagens" FontSize="16" FontWeight="SemiBold" Foreground="White"/>
                </StackPanel>
                <Button Grid.Column="1" Content="✕" Click="CloseButton_Click" Style="{StaticResource IconButtonStyle}" FontSize="14"/>
            </Grid>

            <!-- Content -->
            <StackPanel Grid.Row="1" Margin="0,20,0,0">
                
                <!-- Input File -->
                <Label Content="Imagem de Entrada:" Foreground="{StaticResource PrimaryTextBrush}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="InputPathBox" IsReadOnly="True" Cursor="Arrow" Style="{StaticResource ModernTextBoxStyle}"/>
                    <Button Grid.Column="1" Content="..." Width="40" Margin="5,0,0,0" Click="BrowseInput_Click" Style="{StaticResource SecondaryButtonStyle}" Padding="0"/>
                </Grid>

                <!-- Output Directory -->
                <Label Content="Pasta de Saída (Opcional - Padrão: Mesma da Entrada):" Foreground="{StaticResource PrimaryTextBrush}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="OutputPathBox" IsReadOnly="True" Cursor="Arrow" Style="{StaticResource ModernTextBoxStyle}"/>
                    <Button Grid.Column="1" Content="..." Width="40" Margin="5,0,0,0" Click="BrowseOutput_Click" Style="{StaticResource SecondaryButtonStyle}" Padding="0"/>
                </Grid>

                <!-- Settings -->
                <Grid Margin="0,15,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Alpha Threshold -->
                    <StackPanel Grid.Column="0" Margin="0,0,5,0">
                        <Label Content="Limiar Alpha (0-255):" Foreground="{StaticResource PrimaryTextBrush}"/>
                        <TextBox x:Name="AlphaBox" Text="10" PreviewTextInput="NumberValidationTextBox" Style="{StaticResource ModernTextBoxStyle}"/>
                        <TextBlock Text="Transparência para considerar fundo." 
                                   FontSize="10" Foreground="#888888" Margin="0,2,0,0"/>
                    </StackPanel>

                    <!-- Min Region Size -->
                    <StackPanel Grid.Column="1" Margin="5,0,0,0">
                        <Label Content="Tamanho Mínimo (Px):" Foreground="{StaticResource PrimaryTextBrush}"/>
                        <TextBox x:Name="MinSizeBox" Text="3" PreviewTextInput="NumberValidationTextBox" Style="{StaticResource ModernTextBoxStyle}"/>
                        <TextBlock Text="Largura/Altura mínima para recortar." 
                                   FontSize="10" Foreground="#888888" Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>

                <CheckBox x:Name="OverwriteCheck" Content="Sobrescrever arquivos existentes" 
                          Foreground="#DDDDDD" Margin="0,15,0,0" VerticalContentAlignment="Center"/>

            </StackPanel>

            <!-- Actions -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                <Button Content="Cancelar" Click="CloseButton_Click" Margin="0,0,10,0" Style="{StaticResource SecondaryButtonStyle}"/>
                <Button Content="Processar" Click="ProcessButton_Click" Style="{StaticResource PrimaryButtonStyle}"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>