<html><head><meta charset='UTF-8'>
<link rel='stylesheet' href='../prism-tomorrow.min.css'>
<style>
body { background: #1d1d1d; margin: 0; padding: 10px; font-size: 14px; }
pre { border-radius: 6px; }
</style>
</head><body>
<pre><code class='language-csharp'>namespace DevTools.Harvest.Configuration;

public sealed class HarvestConfig
{
    public HarvestRules Rules { get; set; } = new();
    public HarvestWeights Weights { get; set; } = new();
    public List&lt;HarvestKeywordCategory&gt; Categories { get; set; } = new();

    public int MinScoreDefault { get; set; } = 0;
    public int TopDefault { get; set; } = 100;

    public void Normalize()
    {
        Rules ??= new HarvestRules();
        Weights ??= new HarvestWeights();
        Categories ??= new List&lt;HarvestKeywordCategory&gt;();
        Rules.Normalize();
        Weights.Normalize();

        foreach (var category in Categories)
            category.Normalize();
    }
}

public sealed class HarvestRules
{
    public List&lt;string&gt; Extensions { get; set; } = new();
    public List&lt;string&gt; ExcludeDirectories { get; set; } = new();
    public List&lt;string&gt; IgnoreUsingPrefixes { get; set; } = new();

    public int? MaxFileSizeKb { get; set; }

    public void Normalize()
    {
        Extensions ??= new List&lt;string&gt;();
        ExcludeDirectories ??= new List&lt;string&gt;();
        IgnoreUsingPrefixes ??= new List&lt;string&gt;();
    }
}

public sealed class HarvestWeights
{
    public double FanInWeight { get; set; } = 2.0;
    public double FanOutWeight { get; set; } = 0.5;
    public double KeywordDensityWeight { get; set; } = 1.0;

    public int DensityScale { get; set; } = 100;

    public int StaticMethodThreshold { get; set; } = 3;
    public double StaticMethodBonus { get; set; } = 10.0;

    public double DeadCodePenalty { get; set; } = 5.0;
    public int LargeFileThresholdLines { get; set; } = 0;
    public double LargeFilePenalty { get; set; } = 0;

    public void Normalize()
    {
        if (DensityScale &lt;= 0) DensityScale = 100;
        if (FanInWeight &lt; 0) FanInWeight = 0;
        if (FanOutWeight &lt; 0) FanOutWeight = 0;
        if (KeywordDensityWeight &lt; 0) KeywordDensityWeight = 0;
        if (StaticMethodThreshold &lt; 0) StaticMethodThreshold = 0;
        if (StaticMethodBonus &lt; 0) StaticMethodBonus = 0;
        if (DeadCodePenalty &lt; 0) DeadCodePenalty = 0;
        if (LargeFileThresholdLines &lt; 0) LargeFileThresholdLines = 0;
        if (LargeFilePenalty &lt; 0) LargeFilePenalty = 0;
    }
}

public sealed class HarvestKeywordCategory
{
    public string Name { get; set; } = string.Empty;
    public double Weight { get; set; } = 1.0;
    public List&lt;string&gt; Keywords { get; set; } = new();

    public void Normalize()
    {
        Name ??= string.Empty;
        Keywords ??= new List&lt;string&gt;();
    }
}
</code></pre>
<script src='../prism.min.js'></script>
<script src='../prism-csharp.min.js'></script>
<script src='../prism-json.min.js'></script>
<script src='../prism-markdown.min.js'></script>
<script src='../prism-markup.min.js'></script>
<script src='../prism-powershell.min.js'></script>
<script src='../prism-yaml.min.js'></script>

</body></html>